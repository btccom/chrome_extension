<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Popup</title>
    <style>
        [v-cloak] {
            visibility: hidden;
        }
    </style>

    <script src="/components/i18n.js"></script>
    <script src="../../build/popup.bundle.js"></script>
</head>
<body>

<div class="main-body">
    <div class="container" v-cloak>
        <div class="row">

            <div class="search">
                <form method="GET" :action="submitURL" class="search-form" target="_blank">
                    <div class="search-input-wrapper">
                        <div class="search-coin"></div>
                        <input class="search-input" type="search" name="q"
                               data-i18n="popup_search_placeholder" data-i18n-attribute="placeholder"
                               autofocus autocomplete="off" spellcheck="false">
                    </div>
                    <div class="search-button-wrapper">
                        <button type="submit" class="search-button"><i class="glyphicon glyphicon-search"></i></button>
                    </div>
                </form>
            </div>

            <div class="setting-group">
                <div class="setting-row" v-for="key in coins">
                    <label>
                        <input type="radio" name="priceCoin" :value="key" v-model="options.price.coin">
                        <span>&nbsp;{{key}}</span>
                    </label>
                </div>
            </div>

            <div class="markets">
                <table class="markets-table">
                    <tr>
                        <th class="text-right" data-i18n="popup_markets_exchange"></th>
                        <th class="text-right" data-i18n="popup_markets_latest"></th>
                        <th class="text-right" data-i18n="popup_markets_high"></th>
                        <th class="text-right" data-i18n="popup_markets_low"></th>
                        <th class="text-right" data-i18n="popup_markets_vol"></th>
                    </tr>
                    <template v-for="s in markets.data| sortName options.price.coin">
                    <tr>
                        <td class="text-right">
                            <a :href="symbols[s.market].url">{{ symbols[s.market].display_name }}</a>
                        </td>
                        <td class="text-right price-indicator-td">
                            <price-indicator :v="s.last" :rates="rates" :symbol="s" :options="options"></price-indicator>
                        </td>
                        <td class="text-right">{{ options.price.preferCurrency == 'USD' ? '$' : '¥' }} {{ convert(s.high, s.currency, options.price.preferCurrency) | numberFormat 2}}</td>
                        <td class="text-right">{{ options.price.preferCurrency == 'USD' ? '$' : '¥' }} {{ convert(s.low, s.currency, options.price.preferCurrency) | numberFormat 2}}</td>
                        <td class="text-right">{{ s.vol | numberFormat 0 }}</td>
                    </tr>
                    </template>
                </table>
                <div class="text-right markets-lastupdate"><span data-i18n="popup_last_update"></span> {{
                    markets.updatedAt | timestampFormat }}
                </div>
            </div>

            <footer class="footer">
                <a href="https://chain.btc.com" target="_blank" style="vertical-align: top; display: inline-block;">
                    <i class="icon-btc-logo"></i>
                </a>
                <a href="/components/option/option.html" target="_btccomblank" class="option"
                   data-i18n="popup_settings"></a>
            </footer>
        </div>
    </div>
</div>
</body>
</html>
